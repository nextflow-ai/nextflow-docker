# Stalwart Mail Server Configuration
# Generated by NextFlow deployment script
# Cấu hình được đồng bộ với environment variables trong .env

[server]
hostname = "mail.nextflow.vn"
bind = ["0.0.0.0:25", "0.0.0.0:587", "0.0.0.0:465"]

[server.tls]
certificate = "/etc/stalwart/certs/cert.pem"
private-key = "/etc/stalwart/certs/key.pem"

[storage]
type = "postgresql"
host = "postgres"
port = 5432
database = "nextflow_stalwart_mail"
username = "nextflow_stalwart"
password = "nextflow@2025"

[authentication]
type = "sql"

# Cấu hình admin user mặc định
[authentication.admin]
username = "admin"
password = "nextflow@2025"

[smtp]
max-message-size = 52428800  # 50MB
max-recipients = 100
require-auth = true

[imap]
bind = ["0.0.0.0:143", "0.0.0.0:993"]

[pop3]
bind = ["0.0.0.0:110", "0.0.0.0:995"]

[sieve]
bind = ["0.0.0.0:4190"]

[web]
bind = ["0.0.0.0:80"]  # Port 80 trong container, map ra 8005 bên ngoài

[security]
dkim.enable = true
spf.enable = true
dmarc.enable = true

[anti-spam]
enable = true
threshold = 5.0

[logging]
level = "info"
format = "json"

# Cấu hình NextFlow specific
[nextflow]
domain = "mail.nextflow.vn"
admin_email = "admin@mail.nextflow.vn"
